<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
		<script>
	jQuery(document).ready(function($) {
		$.ajaxSetup({
			beforeSend: function(){
				$(".errores").empty();
			}
		});

		$('#id_materia_utel').autocomplete({
			source: '/autocomplete_materia_utel/'
		});
		$('#id_materia_a_revalidar').autocomplete({
			source: '/autocomplete_materias_externas/'
		});
		$('form').submit(function(event){
			event.preventDefault();
			$.post('/agregar_pre_dic_post/', $('form').serialize(), function(data, textStatus, xhr) {
				window.location.reload();
			}).error(function(data){
				$.each(JSON.parse(data.responseText).errores, function(index, val) {
					var mensaje = '<p>'  + val  + '</p>';
					$('.errores').append(mensaje);
				});
			});
		});
		
	});
	</script>

</head>
<body>
<div class="modal_agregar" style="width:300px;">
<h1>Agregar documento</h1>
<div class="modal_agregar" style="width:300px;">
		<form action="/agregar_documento_post/" method="POST">{%csrf_token%}
		{{formulario.as_p}}
        <div class="botones_modal">
		<input type="submit" value="Guardar">
        </div>
	</form>
	<span class="errores"></span>
</div>
</body>
</div>
</html>

